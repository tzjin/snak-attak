{{define "home"}}
<div id="top">
      <header>
         <div id="name">
            <h1>Snik Snak</h1>
         </div>
      </header>

      <div id="filter_section">
      <div class="container">
         <div class="row">
            <div class="three columns">Meal:</div>
            <div class="three columns">Breakfast</div>
            <div class="three columns">Lunch</div>
            <div class="three columns">Dinner</div>
         </div>
         <div class="row">
            <div class="three columns">Dining Hall:</div>
            <div class="two columns">Rocky/Mathey</div>
            <div class="two columns">Forbes</div>
            <div class="two columns">Whitman</div>
            <div class="two columns">Wilson/Butler</div>
         </div>
         <div class="row">
            <div class="three columns">Diet:</div>
            <div class="two columns">Vegan</div>
            <div class="two columns">Vegetarian</div>
            <div class="two columns">Dairy-free</div>
            <div class="two columns">Gluten-free</div>
         </div>
      </div>
      </div>
   </div>
   <div class="container">
   <table class="u-full-width">
      <thead>
         <tr>
            <th> </th>
            <th>Item</th>
            <th>Dining Hall</th>
            <th>Dietary Options</th>
            <th>Votes</th>
            <th>    </th>
            <th>    </th>
         </tr>
      </thead>
      <tbody>
         {{range $element := .Foods}}
         <tr id='{{$element.Id}}' >
            <td> </td>
            <td>{{$element.Name}}</td>
            <td>{{$element.Hall}}</td>
            <td>{{$element.Filters}}</td>
            <td class='votes' data-food-id='{{$element.Id}}'>{{$element.Votes}}</td>
            <td class='upvote' data-food-id='{{$element.Id}}'>Yum</td>
            <td class='downvote' data-food-id='{{$element.Id}}'>Ick</td>
         </tr>
         {{end}}
      </tbody>
   </table>
   </div>


   <script type="text/javascript">
      $(document).ready(function() {
         $('.upvote').click(function() {
            var id = $(this).data('food-id')
            var vote = $(this).closest("tr").find('.votes')
            vote.html(parseInt(vote.text())+1);
            $.post( "/api/inc/" + id);
         });
         $('.downvote').click(function() {
            var id = $(this).data('food-id')
            var vote = $(this).closest("tr").find('.votes')
            vote.html(parseInt(vote.text())-1);
            $.post("/api/dec/" + id);
         });
      });
   </script>
{{end}}
